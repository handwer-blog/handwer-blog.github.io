

<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>如何把 Android P 的小药丸改成 Q 的小横条 - Handwer&#39;s Blog</title>
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="google" content="notranslate" />

  
  
  <meta name="description" content="
Android Q 是真的香，可惜我只有 Andro..."> 
  
  <meta name="author" content="Handwer STD"> 

  
    <link rel="icon" href="https://s1.ax1x.com/2020/10/16/0H2W79.jpg" type="image/png" sizes="16x16">
  
  
    <link rel="icon" href="https://s1.ax1x.com/2020/10/16/0H2W79.jpg" type="image/png" sizes="32x32">
  
  
    <link rel="apple-touch-icon" href="https://s1.ax1x.com/2020/10/16/0H2W79.jpg" sizes="180x180">
  
  
    <meta rel="mask-icon" href="https://s1.ax1x.com/2020/10/16/0H2W79.jpg" color="#333333">
  
  
    <meta rel="msapplication-TileImage" content="https://s1.ax1x.com/2020/10/16/0H2W79.jpg">
    <meta rel="msapplication-TileColor" content="#000000">
  

  
<link rel="stylesheet" href="/css/style.css">


  
  
<link rel="stylesheet" href="//at.alicdn.com/t/font_1445822_h1619vhl1nr.css">

  

  
  
  
<link rel="stylesheet" href="https://cdn.bootcss.com/fancybox/3.5.7/jquery.fancybox.min.css">

  

  
  
  
<link rel="stylesheet" href="https://cdn.bootcss.com/highlight.js/9.18.1/styles/xcode.min.css">

  

  <script>
    var CONFIG = window.CONFIG || {};
    var ZHAOO = window.ZHAOO || {};
    CONFIG = {
      isHome: false,
      fancybox: true,
      pjax: false,
      lazyload: {
        enable: true,
        loadingImage: '',
      },
      donate: {
        enable: false,
        alipay: 'https://pic.izhaoo.com/alipay.jpg',
        wechat: 'https://pic.izhaoo.com/wechat.jpg'
      },
      motto: {
        api: '',
        default: '现在，走吧，有花开在旅程。'
      },
      galleries: {
        enable: true
      },
      fab: {
        enable: true,
        alwaysShow: false
      },
      carrier: {
        enable: true
      },
      daovoice: {
        enable: false
      }
    }
  </script>

  

  
<meta name="generator" content="Hexo 5.2.0"></head>
<body class="lock-screen">
  <div class="loading"></div>
  


<nav class="navbar">
  <div class="left"></div>
  <div class="center">如何把 Android P 的小药丸改成 Q 的小横条</div>
  <div class="right">
    <i class="iconfont iconmenu j-navbar-menu"></i>
  </div>
</nav>

  <nav class="menu">
  <div class="menu-wrap">
    <div class="menu-close">
      <i class="iconfont iconbaseline-close-px"></i>
    </div>
    <ul class="menu-content">
      
      
      
      
      <li class="menu-item"><a href="/ " class="underline"> 首页</a></li>
      
      
      
      
      <li class="menu-item"><a href="/galleries " class="underline"> 摄影</a></li>
      
      
      
      
      <li class="menu-item"><a href="/archives " class="underline"> 归档</a></li>
      
      
      
      
      <li class="menu-item"><a href="/tags " class="underline"> 标签</a></li>
      
      
      
      
      <li class="menu-item"><a href="/frlink " class="underline"> 友链</a></li>
      
      
      
      
      <li class="menu-item"><a href="/about " class="underline"> 关于</a></li>
      
    </ul>
    <div class="menu-copyright"><p>Powered by <a target="_blank" href="https://hexo.io">Hexo</a>  |  Theme - <a target="_blank" href="https://github.com/izhaoo/hexo-theme-zhaoo">zhaoo</a></p></div>
  </div>
</nav>
  <main id="main">
  <div class="container" id="container">
    <article class="article">
  <div class="wrap">
    <section class="head">
  <img   class="lazyload" data-original="https://s1.ax1x.com/2020/10/16/0HdplR.jpg" src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg=="  draggable="false">
  <div class="head-mask">
    <h1 class="head-title">如何把 Android P 的小药丸改成 Q 的小横条</h1>
    <div class="head-info">
      <span class="post-info-item"><i class="iconfont iconcalendar"></i>二月 05, 2020</span
        class="post-info-item">
      
      <span class="post-info-item"><i class="iconfont iconfont-size"></i>2319</span>
    </div>
  </div>
</section>
    <section class="main">
      <section class="content">
        <blockquote>
<p>Android Q 是真的香，可惜我只有 Android P</p>
</blockquote>
<!--erom-->

<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>看了酷安上一条动态，上面说 Android P 可以获得 Q 的动画和手势，我当即就备份好数据刷了 OmniROM Pie，结果发现修改的教程失效了……根据评论区的留言和一位老哥 @飞碟lcj 分享的两条动态自己摸索出了一条路子</p>
<h1 id="准备材料"><a href="#准备材料" class="headerlink" title="准备材料"></a>准备材料</h1><ul>
<li>原生 / 类原生 Android P</li>
<li>Magisk</li>
<li>QuickSwitch 模块</li>
<li>MT 管理器</li>
</ul>
<h1 id="教程"><a href="#教程" class="headerlink" title="教程"></a>教程</h1><h2 id="刷机"><a href="#刷机" class="headerlink" title="刷机"></a>刷机</h2><p>麒麟 95x 双基带手机直接刷的话用不了双卡，可以参考<a target="_blank" rel="noopener" href="https://cn.club.vmall.com/thread-20017211-1-1.html">这篇教程</a></p>
<h2 id="开启手势及动画"><a href="#开启手势及动画" class="headerlink" title="开启手势及动画"></a>开启手势及动画</h2><p><a target="_blank" rel="noopener" href="https://www.coolapk.com/apk/ch.deletescape.lawnchair.ci">Lawnchair 测试版</a>拥有 Android Q 的动画和手势，下载安装后用 Magisk 模块 QuickSwitch 设为默认桌面和最近应用提供者（Recent Provider），重启即可</p>
<p>接下来长按桌面空白处，打开「主屏幕设置」，找到「最近任务」，把「向上滑动以切换应用」、「Full gesture mode」、「向左滑动以返回」都打开并重启</p>
<p>接下来打开应用、返回桌面的动画就会变成 Android Q 的非线性动画，小药丸此时和 Android Q 的小横条的功能是一样的，只有外观不一样</p>
<h2 id="更改外观"><a href="#更改外观" class="headerlink" title="更改外观"></a>更改外观</h2><center><i>需要修改系统文件</i></center>

<p>小药丸的外观是由 SystemUI.apk 控制的，导航栏的大小是由 framework-res.apk 控制的，需要修改这两个文件</p>
<h3 id="修改-SystemUI"><a href="#修改-SystemUI" class="headerlink" title="修改 SystemUI"></a>修改 SystemUI</h3><p>打开 MT 管理器，定位到 <code>/system/priv-app/SystemUI/</code>，将里面的 SystemUI.apk 文件做好备份，出事了直接进 recovery 恢复（<code>data</code> 没有解锁的需要刷完整包）</p>
<p>点击 SystemUI.apk 再点击「查看」，此时这个 apk 以 zip 的形式展开了。点击右上角三个点 <svg xmlns:xlink="http://www.w3.org/1999/xlink" width="0.647ex" height="3.676ex" style="vertical-align: -0.338ex;" viewBox="0 -1437.2 278.5 1582.7" role="img" focusable="false" xmlns="http://www.w3.org/2000/svg" aria-labelledby="MathJax-SVG-1-Title">
<title id="MathJax-SVG-1-Title">\vdots</title>
<defs aria-hidden="true">
<path stroke-width="1" id="E1-MJMAIN-22EE" d="M78 30Q78 54 95 72T138 90Q162 90 180 74T199 31Q199 6 182 -12T139 -30T96 -13T78 30ZM78 440Q78 464 95 482T138 500Q162 500 180 484T199 441Q199 416 182 398T139 380T96 397T78 440ZM78 840Q78 864 95 882T138 900Q162 900 180 884T199 841Q199 816 182 798T139 780T96 797T78 840Z"></path>
</defs>
<g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)" aria-hidden="true">
 <use xlink:href="#E1-MJMAIN-22EE" x="0" y="0"></use>
</g>
</svg> 选择「搜索」，在搜索框中输入 <code>ic_sysbar_home_quick</code>，理论上只有一个搜索结果 <code>ic_sysbar_home_quick_step.xml</code>，点开它，此时进入了该文件所在的目录。点击该文件，选择「反编译」，等待它加载好。</p>
<p>修改 <code>android:height</code> 和 <code>android:width</code> 后面的值为 <code>140dp</code><br>修改 <code>android:viewportWidth</code> 和 <code>android:viewportHeight</code> 后面的值为 <code>140.0</code></p>
<p>修改 <code>android:pathData</code> 后面的字符串为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">M138,72H2c-0.89,0-2-1.11-2-2l0,0c0-0.89,1.11-2,2-2H138c1.11,0,2,0.89,2,2l0,0c0,0.89,-1.11,2,-2,2z<br></code></pre></td></tr></table></figure>

<p>只替换<strong>引号里面</strong>的内容，<strong>请直接复制</strong>，一个字母都不能错，否则有可能开机后无限 fc</p>
<p><code>android:fillColor</code> 不用动</p>
<p>最终这个文件应该差不多长这样：</p>
<p><img   class="lazyload" data-original="https://s2.ax1x.com/2020/02/05/1r6p1H.png" src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg=="  alt="1r6p1H.png"></p>
<p><strong>上面的数据请不要随意更改，请直接使用上面提供的数据</strong></p>
<p>保存文件，退出编辑器，提示更新文件选是，重启，此时小药丸就变成小横条了，但是导航栏还是那么大一个</p>
<h3 id="修改-framework-res-apk"><a href="#修改-framework-res-apk" class="headerlink" title="修改 framework-res.apk"></a>修改 framework-res.apk</h3><p>更改导航栏高度有两个选择：</p>
<ul>
<li>直接上重力工具箱（Android P 版本）</li>
<li>修改 framework-res.apk</li>
</ul>
<p>这里介绍如何修改 framework-res.apk</p>
<p>打开 MT 管理器，定位到 <code>/system/framework/</code>，将里面的 framework-res.apk 文件做好备份，出事了也可以直接用 recovery 恢复</p>
<p>点击 framework-res.apk 再点击「查看」，此时这个 apk 以 zip 的形式展开了。点击 resources.arsc 文件，再点击「Arsc编辑器」。</p>
<p>点击「Android」，之后点击「dimen」，进入之后再次点击「dimen」（理论上应该是第一个选项），点击右上角三个点 <svg xmlns:xlink="http://www.w3.org/1999/xlink" width="0.647ex" height="3.676ex" style="vertical-align: -0.338ex;" viewBox="0 -1437.2 278.5 1582.7" role="img" focusable="false" xmlns="http://www.w3.org/2000/svg" aria-labelledby="MathJax-SVG-1-Title">
<title id="MathJax-SVG-1-Title">\vdots</title>
<defs aria-hidden="true">
<path stroke-width="1" id="E1-MJMAIN-22EE" d="M78 30Q78 54 95 72T138 90Q162 90 180 74T199 31Q199 6 182 -12T139 -30T96 -13T78 30ZM78 440Q78 464 95 482T138 500Q162 500 180 484T199 441Q199 416 182 398T139 380T96 397T78 440ZM78 840Q78 864 95 882T138 900Q162 900 180 884T199 841Q199 816 182 798T139 780T96 797T78 840Z"></path>
</defs>
<g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)" aria-hidden="true">
 <use xlink:href="#E1-MJMAIN-22EE" x="0" y="0"></use>
</g>
</svg> 选择过滤，在搜索框中输入「navigation」，点击确定</p>
<p>此时应该就剩下</p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">navigation_bar_height</span><br><span class="hljs-attribute">navigation_bar_height_car_mode</span><br><span class="hljs-attribute">navigation_bar_height_landscape</span><br><span class="hljs-attribute">navigation_bar_height_landscape_car_mode</span><br><span class="hljs-attribute">navigation_bar_width</span><br><span class="hljs-attribute">navigation_bar_width_car_mode</span><br></code></pre></td></tr></table></figure>
<p>这几项</p>
<p>修改下面这几项（点击选项，在输入框中修改）</p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">navigation_bar_height</span><br><span class="hljs-attribute">navigation_bar_height_landscape</span><br><span class="hljs-attribute">navigation_bar_width</span><br><span class="hljs-attribute">navigation_bar_width_car_mode</span><br></code></pre></td></tr></table></figure>

<p>为 <code>25dp</code>（这个是我觉得一个比较适合的值，数字大了导航栏就会更高，数字小了导航栏就会更低，可以按照习惯自由调整）<br>剩下的两项改不改都可以</p>
<p>调整完了保存文件，退出编辑器，提示更新文件选是，接着重启，重启之后导航栏的高度就降下来了</p>
<p>此时你就获得了一个 Android Q 的小横条</p>
<p>效果图</p>
<p><img   class="lazyload" data-original="https://s2.ax1x.com/2020/02/05/1rgxhT.md.png" src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg=="  alt="1rgxhT.png"></p>
<h1 id="优化"><a href="#优化" class="headerlink" title="优化"></a>优化</h1><p>侧滑返回手势可以使用流体手势实现，但是返回键的小钩子还有，如何去除？</p>
<p>修改 <code>/system/priv-app/SystemUI/SystemUI.apk</code> 中的 <code>ic_sysbar_back_quick_step.xml</code>（寻找方式同上）</p>
<p>将 <code>android:fillColor</code> 后的值改为 <code>?00000000</code>（也就是不透明度为0%的黑色），剩下的<strong>什么都不要动</strong></p>
<p>保存退出重启即可</p>
<p>效果图</p>
<p><img   class="lazyload" data-original="https://s2.ax1x.com/2020/02/07/12BbSU.md.png" src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg=="  alt="qwq"></p>

      </section>
      <section class="extra">
        
        <ul class="copyright">
  
  <li><strong>本文作者：</strong>Handwer STD</li>
  <li><strong>本文链接：</strong><a href="https://blog.handwer-std.top/2020/02-05/Fake-Android-Q-Navigation-Handle/index.html">https://blog.handwer-std.top/2020/02-05/Fake-Android-Q-Navigation-Handle/index.html</a></li>
  <li><strong>版权声明：</strong>本博客所有文章均采用<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh"
      rel="external nofollow" target="_blank"> BY-NC-SA </a>许可协议，转载请注明出处！</li>
  
</ul>
        
        
        
  <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Android/" rel="tag">Android</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%88%B7%E6%9C%BA/" rel="tag">刷机</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%AD%94%E6%94%B9/" rel="tag">魔改</a></li></ul>

        
<nav class="nav">
  
    <a href="/2020/10-16/yan-ge-ci-duan-lu/"><i class="iconfont iconleft"></i>严格次短路</a>
  
  
    <a href="/2020/01-20/Luogu-P1608/">洛谷P1608《路径统计》<i class="iconfont iconright"></i></a>
  
</nav>

      </section>
      
      <section class="comments">
  
  <div class="btn" id="comments-btn">查看评论</div>
  
  
<div id="valine"></div>
<script defer src="//unpkg.com/valine/dist/Valine.min.js"></script>
<script>
  window.onload = function () {
    var loadValine = function () {
      new Valine({
        el: '#valine',
        app_id: "C91grFXiz9WXlDKws9gDKPTA-gzGzoHsz",
        app_key: "y8tzSOvAsnOqNYwRNQI7WG9v",
        placeholder: "看了这么多，可能你有话想说",
        avatar: "mp",
        pageSize: "10",
        lang: "zh-CN",
      });
    }
    if ( true ) {
      $("#comments-btn").on("click", function () {
        $(this).hide();
        loadValine();
      });
    } else {
      loadValine();
    }
  };
</script>

</section>
      
    </section>
  </div>
</article>
  </div>
</main>
  <footer class="footer">
  <div class="footer-social">
    
    
    
    
    
    <a href="https://github.com/HandwerSTD " target="_blank" onMouseOver="this.style.color= '#24292E'"
      onMouseOut="this.style.color='#33333D'">
      <i class="iconfont footer-social-item  icongithub-fill "></i>
    </a>
    
    
    
    
    
    <a href="mailto:handwer@qq.com " target="_blank" onMouseOver="this.style.color='#FFBE5B'"
      onMouseOut="this.style.color='#33333D'">
      <i class="iconfont footer-social-item  iconmail"></i>
    </a>
    
  </div>
  <div class="footer-copyright"><p>Powered by <a target="_blank" href="https://hexo.io">Hexo</a>  |  Theme - <a target="_blank" href="https://github.com/izhaoo/hexo-theme-zhaoo">zhaoo</a></p></div>
</footer>
  
      <div class="fab fab-plus">
    <i class="iconfont iconplus"></i>
  </div>
  
  <div class="fab fab-up">
    <i class="iconfont iconcaret-up"></i>
  </div>
  
</body>


<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>






<script src="https://cdn.bootcdn.net/ajax/libs/jquery.lazyload/1.9.1/jquery.lazyload.min.js"></script>






<script src="https://cdn.bootcss.com/fancybox/3.5.7/jquery.fancybox.min.js"></script>






<script src="/js/utils.js"></script>
<script src="/js/modules.js"></script>
<script src="/js/zui.js"></script>
<script src="/js/script.js"></script>







<script>
  (function () {
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
      bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    } else {
      bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
  })();
</script>


<script>
  var _hmt = _hmt || [];
  (function () {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?4c204d8bc027a0455b5fc642ac334ca8";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
  })();
</script>










</html>